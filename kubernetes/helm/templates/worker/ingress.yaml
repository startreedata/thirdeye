{{- if and .Values.traefik.enabled .Values.worker.enabled -}}
kind: Ingress
apiVersion: extensions/v1beta1
metadata:
  name: {{ printf "%s-%s" (include "thirdeye.traefik.fullname" . ) "thirdeye" | trunc -63 }}
spec:
  rules:
  - host: {{ .Release.Name }}.{{ .Release.Namespace }}.{{ required "domain is required." .Values.domain }}
    http:
      paths:
      - backend:
          serviceName: {{ include "thirdeye.worker.headless" . }}
          servicePort: {{ .Values.worker.port }}
{{- end }}
